<head>
    <title>Voter</title>
</head>

<body>
    <div class="container">
        <header>
            <h1>Voter</h1>

            {{> loginButtons}}

            {{> eventButtons}}

            {{#with creating_event}}
            <form id="creating-event">
                <input type="text" name="event_name" placeholder="Event Name" />
            </form>
            {{/with}}

            {{#if currentUser}}
            <form class="new-task">
                <input type="text" name="text" placeholder="Type to add new vote items" />
            </form>
            {{/if}}
        </header>

        <ul>
            {{#each tasks}}
            {{> task}}
            {{/each}}
        </ul>
<!--         {{#if currentUser}}
        <button type = "button" id = "cont"><a href="results.html">Continue</a></button>
        {{/if}} -->

        {{> results}}
    </div>
</body>

<template name="task">
    <li class="task_item">
        <button class="delete">&times;</button>
        <span class="text">{{item_name}}</span>
    </li>
</template>

<template name="eventButtons">
    <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="active_event">{{active_button_text}} <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            {{#each events}}
            {{> event_item}}
            {{/each}}
            <li class="divider"></li>
            <li><a href="#" id="new_event">Add a new event</a></li>
        </ul>
    </div>
</template>

<template name="event_item">
    <li><a href="#">{{event_name}}</a></li>
</template>

<template name="results">
    <h2>Please vote at: +1(678)785-4359</h2>
    <h3>Event ID: {{event_id}}</h3>
    <!-- Can be replaced by {{twilionumber}} -->
    <h3>Vote Statistics</h3>
    {{> votestats}}
</template>
<template name="votestats">
    <table class="table">
        <thead>
            <tr>
                <th>Item ID</th>
                <th>Item Name</th>
                <th>Total Votes</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <td></td>
                <td>Total Votes</td>
                <td>{{total_votes}}</td>
            </tr>
        </tfoot>
        {{#each items}}
        {{> item}}
        {{/each}}
    </table>
</template>

<template name="item">
    <tr>
        <td>{{item_num}}</td>
        <td>{{item_name}}</td>
        <td>{{votes_count}}</td>
    </tr>
</template>